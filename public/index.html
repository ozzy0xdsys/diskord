<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Diskord</title>
  <link rel="icon" href="data:,"/>
  <link rel="stylesheet" href="/styles.css"/>
</head>
<body>
  <div id="toast" class="toast hidden"></div>

  <div class="shell">
    <header class="topbar">
      <div class="brand">
        <div class="logo">D</div>
        <div>
          <div class="brand-title">Diskord</div>
          <div class="brand-sub">Ephemeral, E2EE sessions</div>
        </div>
      </div>
      <div id="userPill" class="userpill hidden">
        <span id="meLabel"></span>
        <button id="logoutBtn" class="btn ghost">Log out</button>
      </div>
    </header>

    <main class="main">
      <!-- AUTH -->
      <section id="authView" class="card auth">
        <h1>Login / Sign up</h1>
        <p class="muted">If the account doesn't exist, we'll create it with that password.</p>
        <div class="form">
          <label>Username</label>
          <input id="username" autocomplete="username" placeholder="username" />
          <label>Password</label>
          <input id="password" autocomplete="current-password" type="password" placeholder="password" />
          <button id="authBtn" class="btn primary">Continue</button>
          <div class="hint">Usernames: 3–20 chars (letters, numbers, underscore). Password: 6+ chars.</div>
        </div>
      </section>

      <!-- APP -->
      <section id="appView" class="app hidden">
        <aside class="sidebar card">
          <div class="sidebar-actions">
            <button id="joinBtn" class="btn">Join via Code</button>
            <button id="createBtn" class="btn primary">Create Session</button>
          </div>

          <div class="block">
            <div class="block-title">Active Sessions</div>
            <div id="sessionsList" class="list"></div>
          </div>

          <div class="spacer"></div>

          <div class="mebox">
            <div class="muted">Logged in as</div>
            <div id="meName" class="mono"></div>
          </div>
        </aside>

        <section class="chat card">
          <div class="chat-head">
            <div class="chat-meta">
              <div class="code mono" id="sessionCode">—</div>
              <div class="muted small">Owner: <span id="sessionOwner">—</span></div>
            </div>

            <div class="chat-right">
              <div class="members"><span id="memberCount">0</span> member(s)</div>
              <button id="endBtn" class="btn danger hidden">End session</button>
            </div>
          </div>

          <div id="messages" class="messages"></div>

          <div class="composer">
            <input id="fileInput" type="file" class="hidden"/>
            <button id="attachBtn" class="btn">Attach</button>
            <input id="msgInput" placeholder="Message (E2EE)..." />
            <button id="sendBtn" class="btn primary">Send</button>
          </div>
        </section>
      </section>
    </main>
  </div>

  <!-- Join modal -->
  <div id="modalBack" class="modal-back hidden">
    <div class="modal card">
      <div class="modal-title">Join a session</div>
      <div class="muted small">Enter the code like <span class="mono">ABCD-EFGH</span></div>
      <input id="codeInput" class="mono" placeholder="XXXX-XXXX" />
      <div class="modal-actions">
        <button id="cancelJoin" class="btn ghost">Cancel</button>
        <button id="confirmJoin" class="btn primary">Join</button>
      </div>
    </div>
  </div>

  <script type="module" src="/app.js"></script>
</body>
</html>
